
@using WebApplication2mvc.Models
@using WebApplication2mvc.ViewModels

@model  订单表视图列表
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap
    <link rel="stylesheet" href="./css/bootstrap.min.css"  >


        <script src="https://cdn.jsdelivr.cn/npm/jquery@1.12.4/dist/jquery.min.js" ></script>

        <script src="./js/bootstrap.min.js"  ></script>   -->
    <!-- Bootstrap
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    -->


    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <style>
        body {
            margin: 0 auto;
            padding: 0;
            background-color: #f7f8fa;
        }


      


        a {
            color: #000000;
            text-decoration: none;
        }

            a:hover {
                color: #000000;
                text-decoration: none;
            }



        img {
            width: 80px;
            height: 80px;
            padding: 10px;
            background-size: cover;
            border-radius: 25px;
        }


       

    
    </style>
    <script>
        @{
            string dingdanhao = "";

            if (ViewBag.aa == "0")
            {
                dingdanhao = "/yuanshen/在线设置?q=9999";

            }
            else {
                dingdanhao = "/yuanshen/在线设置?q=" + ViewBag.dd;
            }



            string lixian = "";
            if (ViewBag.aa == "0")
            {
                lixian = "/yuanshen/离线设置?q=9999";

            }
            else
            {
                lixian = "/yuanshen/离线设置?q=" + ViewBag.dd;
            }



            string dadanzhong = "";
            if (ViewBag.aa == "0")
            {
                dadanzhong = "/yuanshen/打单中?q=9999";

            }
            else
            {
                dadanzhong = "/yuanshen/打单中?q=" + ViewBag.dd;
            }

        }


        function 设置在线状态() {
            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            xmlhttp.open("GET",   "@dingdanhao"    , true);
            xmlhttp.send();

           // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                   // alert(xmlhttp.responseText);
                   // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById("在线状态").innerHTML = "在线";

                    }
                }
            }
          //  window.location = "/yuanshen/index";
        }




         function 设置离线状态() {
            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            xmlhttp.open("GET",   "@lixian"    , true);
            xmlhttp.send();

           // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                   // alert(xmlhttp.responseText);
                   // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById("在线状态").innerHTML = "离线";

                    }
                }
            }
          //  window.location = "/yuanshen/index";
        }




           function 设置打单状态() {
            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            xmlhttp.open("GET",   "@dadanzhong"    , true);
            xmlhttp.send();

           // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                   // alert(xmlhttp.responseText);
                   // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById("在线状态").innerHTML = "打单中，不接单";

                    }
                }
            }
          //  window.location = "/yuanshen/index";
        }


        function 同意还价(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/同意还价?q=" +ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                   // alert(xmlhttp.responseText);
                    // alert(3333);
                  

                        document.getElementById(ee).innerHTML = "同意还价，等待付款";
                        document.getElementById("b" + ee).innerHTML = xmlhttp.responseText;

                    
                }
            }
        }



        function 不同意(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/不同意?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById(ee).innerHTML = "不同意";

                    }
                }
            }
        }


        function 同意付款(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/同意付款?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                     // alert(xmlhttp.responseText);
                    // alert(3333);
                  

                    document.getElementById(ee).innerHTML = "打手同意付款，请买家付款";

                        document.getElementById("b" + ee).innerHTML =xmlhttp.responseText;

                    
                }
            }
        }



        function 不同意付款(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/不同意付款?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById(ee).innerHTML = "打手不同意付款，此订单不接，请勿付款";

                    }
                }
            }
        }






        function 已付款(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/已付款?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById(ee).innerHTML = "已付款";

                    }
                }
            }
        }

        function 登陆账号中(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/登陆账号中?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById(ee).innerHTML = "登陆账号中，待卖家填写验证码";

                    }
                }
            }
        }


        function 代肝中(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/代肝中?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById(ee).innerHTML = "代肝中";

                    }
                }
            }
        }


        function 已完成(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/已完成?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);
                    if (xmlhttp.responseText == "1") {

                        document.getElementById(ee).innerHTML = "已完成";

                    }
                }
            }
        }





        function 刷新验证码(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/刷新验证码?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);


                        document.getElementById("a"+ee).innerHTML = xmlhttp.responseText;


                }
            }
        }



        function 刷新买家进度(ee) {



            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            var 同意还价action = "/yuanshen/刷新买家进度?q=" + ee;
            //alert(同意还价action);
            var tt = 3;
            xmlhttp.open("GET", 同意还价action, true);
            xmlhttp.send();

            // document.getElementById("在线状态").innerHTML = "bbbbbbbbbb";
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

                    // alert(xmlhttp.responseText);
                    // alert(3333);


                    document.getElementById( ee).innerHTML = xmlhttp.responseText;


                }
            }
        }

    </script>

</head>
<body class="container">

    <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
     同意还价或同意付款后，买家qq可见

    </div>

    <div class="img" style=" position: relative; margin: 0 auto; background-image: url(../../Content/paimeng4.jpg);
       width: 400px; height: 170px; background-size: 100%; background-repeat: no-repeat;">
    </div>



    @ViewBag.aa

    @{
        Model6 aa = new Model6();
        //string 订单号 = Request.QueryString["q"];
        string sql = " select * from 订单表视图 where qq='33'";
        List<订单表视图> eeee = aa.订单表视图.SqlQuery(sql).ToList();


    }


    <div class="" style="display:flex">当前状态： <p class="在线状态" id="在线状态">  @ViewBag.ee </p></div>
    <div class="row">


        <div class="col-xs-4 col-sm-4 col-md-4" style="background-color:lavenderblush;">
            <button type="button" class="btn btn-default btn-lg" onclick="设置在线状态()" style="width: 100%; background-color: #337ab7;   font-weight: 700; font-size: 16px ">
                在线接单
            </button>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4" style="background-color:lavenderblush;">
            <button type="button" class="btn btn-default btn-lg" onclick="设置打单状态()" style="width: 100%; background-color: #337ab7;   font-weight: 700; font-size: 16px ">
                打单中，不接单
            </button>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4" style="background-color:lavenderblush;">
            <button type="button" class="btn btn-default btn-lg" onclick="设置离线状态()" style="width: 100%; background-color: #337ab7;   font-weight: 700; font-size: 16px ">
                停止接单
            </button>
        </div>





    </div>

    <div style="  width:100%">


        @foreach (订单表视图 item in Model.列表list)
        {


            <div class="row" style=" ">
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="" style=" box-shadow: #9e9e9e 0px 0px 1px 1px; border-radius: 25px; margin-top: 20px;  ">
                        <a style="display: flex;  /*justify-content: center;">
                            <img src="../../Content/甜甜花.jpg" alt="的法规规定" style="  ">
                            <div>
                                <div class="text1" style=" display: flex; white-space: nowrap;   "> <span style="color:#337ab7;font-size:15px">订单编号：@item.订单编号 </span></div>
                                <div class="text1" style=" display: flex; white-space: nowrap; font-size: 18px; color: #337ab7 "> @item.材料名称 * @item.数量 * @item.材料单价 = @item.金额 元</div>
                                @{ string 买家qqid = "b" + item.订单编号;}

                                <div class="text1" style=" display: flex; white-space: nowrap;   "> <span style="color:#337ab7;font-size:15px">还价金额：@item.还价金额 元   <span id="@买家qqid">买家qq：@item.隐藏qq</span></span></div>
                                <div class="text1" style=" display: flex; white-space: nowrap;   ">
                                    <span style="color:#337ab7;font-size:15px">游戏账号：@item.账号  </span>
                                    <span style="color:#337ab7;font-size:15px;text-align:right;padding-left:40px">
                                        <button type="button" class="btn btn-success   " onclick="刷新买家进度('@item.订单编号')">
                                            刷新买家进度
                                        </button>
                                    </span>
                                </div>
                                <div class="text1" style=" display: flex; white-space: nowrap;   "> 进度：<span style="color:#337ab7;font-size:15px" id="@item.订单编号">@item.订单状态</span></div>
                                <div class="text1" style=" display: flex; white-space: nowrap; "> 时间：@item.日期</div>
                            </div>
                        </a>

                    </div>

                </div>











                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block " onclick="同意还价('@item.订单编号')">
                        同意还价
                    </button>

                </div>


                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="不同意('@item.订单编号')">
                        不同意
                    </button>
                </div>



                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="同意付款('@item.订单编号')">
                        同意付款
                    </button>
                </div>




                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="不同意付款('@item.订单编号') ">
                        不同意付款
                    </button>
                </div>



                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="已付款('@item.订单编号')">
                        已付款
                    </button>

                </div>

                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="登陆账号中('@item.订单编号')">
                        登陆账号中
                    </button>
                    @{ string 验证码id = "a" + item.订单编号;}
                    <div class="text1  " style=" display: flex; white-space: nowrap;   ">
                        <button type="button" class="btn btn-success " onclick="刷新验证码('@item.订单编号')">
                            刷新验证码
                        </button>

                        <span style="color:#337ab7;font-size:15px" id="@验证码id">  验证码： @item.验证码</span>

                    </div>
                </div>



                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="代肝中('@item.订单编号')">
                        代肝中
                    </button>
                </div>

                <div class="col-xs-3 col-sm-3 col-md-3">
                    <button type="button" class="btn btn-success btn-block" onclick="已完成('@item.订单编号')">
                        已完成
                    </button>
                </div>




            </div>







        }

    </div>



</body>
</html>
